# Gitlet Design Document

## Gitlet主要功能

- 保存整个文件目录的内容。在 Gitlet 中，这被称为提交，而保存的内容本身被称为提交。
- 恢复一个或多个文件或整个提交的版本。在 Gitlet 中，这被称为检出这些文件或该提交。
- 查看您的备份历史。在 Gitlet 中，您可以通过一个叫做日志的东西来查看这个历史。
- 维护相关的提交序列，称为分支。
- 合并一个分支中做出的更改到另一个分支中。
- 在 Gitlet 中，您不是一次提交一个单独的文件。相反，您可以同时提交一组连贯的文件。
- 不仅维护文件的旧版本和新版本，还能维护不同的版本。


## 一些建议与实现

- 使用树的数据结构存储提交信息。
- 一旦创建了一个提交节点，它就永远不会被销毁（或完全更改）。我们只能向提交树添加新事物，而不能修改现有事物。
- blob：文件的保存内容。由于 Gitlet 保存了许多文件版本，单个文件可能对应多个 blob：每个 blob 在不同的提交中被跟踪。
- trees: 目录结构将名称映射到 blob 和其他树（子目录）的引用。
- commits: 日志消息的组合、其他元数据（提交日期、作者等）、对树的引用以及父提交的引用。仓库还维护从分支头到提交引用的映射，以便某些重要的提交有符号名称。
- 我们的元数据仅包含时间戳和日志消息。因此，一个提交将包含日志消息、时间戳、文件名到 blob 引用的映射、父引用以及（对于合并）第二个父引用。 
- 每个 blob 和每个 commit——都有一个唯一的整数 ID，用作对象的引用。
- 通过使用名为 SHA-1（安全哈希 1）的加密哈希函数
- 区分提交和 blob 的哈希值。实现这一点的良好方法是在 .gitlet 目录内设计一个合理的目录结构。另一种方法是，为每个对象添加一个额外的单词进行哈希，其中 blob 有一个值，提交有另一个值。
- 如果它们的 SHA-1 相同，我们就可以简单地假设这两个文件是相同的。
- 为了使 Gitlet 能够运行，它需要一个地方来存储旧文件的副本和其他元数据。所有这些内容都必须存储在一个名为 .gitlet 的目录中
- 要立即退出您的程序，您可以调用 System.exit(0) 。
- 你应该首先考虑如何存储你的数据以轻松支持这些命令，其次考虑是否有机会重用你已经实现的命令
- 

## 错误情况

- 如果用户没有输入任何参数，则打印消息 Please enter a command. 并退出。
- 如果用户输入了一个不存在的命令，则打印消息 No command with that name exists. 并退出。
- 如果用户输入了错误数量或格式的操作数命令，则打印消息 Incorrect operands. 并退出
- 如果用户输入了一个需要处于已初始化的 Gitlet 工作目录中的命令（即包含 .gitlet 子目录的目录），但不在这样的目录中，则打印消息 Not in an initialized Gitlet directory.
- 

## 文件结构设计

- .gitlet/
  - commits/
    - commit1/
      - version1
      - ...
    - commit2/
      - version2
      - ...
    - ...
  - blobs/
    - blob1
    - blob2
    - ...
  - trees
- working section



## Algorithms

## Persistence

